<!DOCTYPE html>
<html lang="en">
<head>
    <script defer src="/_vercel/analytics/script.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saved Trades - TradeMatch Customer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2300E5A0'/%3E%3Cstop offset='100%25' style='stop-color:%2342A5F5'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='url(%23g)'/%3E%3Ctext x='50' y='70' font-family='Arial, sans-serif' font-size='60' font-weight='800' fill='%23ffffff' text-anchor='middle'%3ET%3C/text%3E%3C/svg%3E">
    <link rel="stylesheet" href="../styles/styles.css">
</head>
<body>
    <div class="ambient-bg"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="index.html" class="logo">
                <div class="logo-icon">T</div>
                <span class="logo-text">TradeMatch</span>
            </a>
        </div>

        <nav class="sidebar-nav">
            <div class="nav-section">
                <div class="nav-section-title">Main</div>
                <a href="index.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="my-jobs.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                    <span class="nav-text">My Jobs</span>
                </a>
                <a href="quotes.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    <span class="nav-text">Quotes</span>
                </a>
                <a href="messages.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                    </svg>
                    <span class="nav-text">Messages</span>
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Trades</div>
                <a href="saved-trades.html" class="nav-item active">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                    </svg>
                    <span class="nav-text">Saved Trades</span>
                </a>
                <a href="reviews.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                    </svg>
                    <span class="nav-text">Reviews</span>
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Account</div>
                <a href="notifications.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                    </svg>
                    <span class="nav-text">Notifications</span>
                </a>
                <a href="settings.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    <span class="nav-text">Settings</span>
                </a>
            </div>
        </nav>

        <div class="sidebar-footer">
            <button class="collapse-btn" id="collapseBtn">
                <svg class="collapse-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"/>
                </svg>
            </button>
        </div>
    </aside>

    <!-- Top Navigation -->
    <!-- Top Navigation with Modals -->
<header class="top-nav" id="topNav">
    <div class="top-nav-left">
        <div class="search-container">
            <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
            <input type="text" class="search-input" placeholder="Search jobs, quotes, messages...">
        </div>
    </div>

    <div class="top-nav-right">
        <div class="theme-toggle" id="themeToggle">
            <div class="theme-toggle-slider">
                <svg class="theme-toggle-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
                </svg>
            </div>
        </div>

        <!-- Notification Button with Modal -->
        <div class="notification-modal-container">
            <button class="icon-button" id="notificationBtn">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                </svg>
                <span class="notification-badge"></span>
            </button>

            <!-- Notification Modal -->
            <div class="top-bar-modal notification-modal" id="notificationModal">
                <div class="notification-modal-header">
                    <h3 class="notification-modal-title">Notifications</h3>
                    <button class="mark-all-read" id="markAllRead">Mark all read</button>
                </div>
                <div class="notification-modal-body">
                    <div class="notification-item unread" data-link="quotes.html">
                        <div class="notification-icon quote">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                        </div>
                        <div class="notification-content">
                            <div class="notification-text">New quote received from Elite Builders for Kitchen Renovation</div>
                            <div class="notification-time">2 hours ago</div>
                        </div>
                    </div>

                    <div class="notification-item unread" data-link="messages.html">
                        <div class="notification-icon message">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                            </svg>
                        </div>
                        <div class="notification-content">
                            <div class="notification-text">Green Gardens Ltd sent you a message about Garden Landscaping</div>
                            <div class="notification-time">5 hours ago</div>
                        </div>
                    </div>

                    <div class="notification-item" data-link="reviews.html">
                        <div class="notification-icon review">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                            </svg>
                        </div>
                        <div class="notification-content">
                            <div class="notification-text">Please leave a review for PowerPro Electricians</div>
                            <div class="notification-time">1 day ago</div>
                        </div>
                    </div>

                    <div class="notification-item" data-link="quotes.html">
                        <div class="notification-icon quote">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                        </div>
                        <div class="notification-content">
                            <div class="notification-text">New quote received from Quick Fix Plumbing for Bathroom Plumbing</div>
                            <div class="notification-time">2 days ago</div>
                        </div>
                    </div>
                </div>
                <div class="notification-modal-footer">
                    <a href="notifications.html" class="view-all-link">View all notifications</a>
                </div>
            </div>
        </div>

        <!-- Profile Menu with Modal -->
        <div class="profile-modal-container">
            <div class="user-menu" id="profileMenuBtn">
                <div class="user-avatar">JD</div>
                <div class="user-info">
                    <div class="user-name">John Doe</div>
                    <div class="user-role">Customer</div>
                </div>
            </div>

            <!-- Profile Modal -->
            <div class="top-bar-modal profile-modal" id="profileModal">
                <div class="profile-modal-header">
                    <div class="profile-modal-avatar">JD</div>
                    <div class="profile-modal-info">
                        <div class="profile-modal-name">John Doe</div>
                        <div class="profile-modal-role">Customer</div>
                    </div>
                </div>
                <div class="profile-modal-menu">
                    <a href="profile.html" class="profile-menu-item">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        My Profile
                    </a>
                    <a href="settings.html" class="profile-menu-item">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        Account Settings
                    </a>
                    <div class="profile-menu-divider"></div>
                    <a href="#" class="profile-menu-item logout" id="logoutBtn">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                        </svg>
                        Logout
                    </a>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Modal Backdrop -->
<div class="modal-backdrop" id="modalBackdrop"></div>


    <style>
/* ========================================
   SAVED TRADES PAGE STYLES
   ======================================== */

/* Page Header Actions */
.page-header-actions {
    display: flex;
    align-items: center;
    gap: 12px;
}

/* Filter Select */
.filter-select {
    padding: 8px 32px 8px 12px;
    background: var(--surface-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 14px;
    color: var(--text-primary);
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23666'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
    background-size: 20px;
    min-width: 160px;
}

.filter-select:hover {
    border-color: var(--border-hover);
}

.filter-select:focus {
    outline: none;
    border-color: #42A5F5;
}

[data-theme="light"] .filter-select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23999'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
}

/* Saved Trades Grid */
.saved-trades-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
    gap: 24px;
}

@media (max-width: 768px) {
    .saved-trades-grid {
        grid-template-columns: 1fr;
    }
}

/* Trade Card */
.trade-card {
    background: var(--surface-primary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    padding: 24px;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.trade-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #42A5F5, #7C4DFF);
    opacity: 0;
    transition: opacity 0.2s ease;
}

.trade-card:hover {
    border-color: var(--border-hover);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    transform: translateY(-2px);
}

.trade-card:hover::before {
    opacity: 1;
}

/* Trade Card Header */
.trade-card-header {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    margin-bottom: 16px;
}

.trade-avatar {
    width: 64px;
    height: 64px;
    border-radius: 12px;
    background: var(--surface-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    border: 2px solid var(--border-color);
    font-size: 24px;
    font-weight: 700;
    color: var(--text-tertiary);
}

.trade-avatar.has-image {
    background-size: cover;
    background-position: center;
    border-color: transparent;
}

.trade-info {
    flex: 1;
    min-width: 0;
}

.trade-name {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 6px 0;
    line-height: 1.3;
}

.trade-category-badge {
    display: inline-block;
    padding: 4px 10px;
    background: rgba(66, 165, 245, 0.15);
    color: #42A5F5;
    font-size: 12px;
    font-weight: 600;
    border-radius: 6px;
    font-family: 'Space Mono', monospace;
    margin-bottom: 6px;
}

[data-theme="light"] .trade-category-badge {
    background: rgba(59, 130, 246, 0.15);
    color: #3B82F6;
}

.trade-location {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: var(--text-tertiary);
    margin-top: 4px;
}

.trade-location svg {
    width: 14px;
    height: 14px;
}

/* Remove Button */
.trade-remove-btn {
    position: absolute;
    top: 16px;
    right: 16px;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background: transparent;
    border: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--text-tertiary);
}

.trade-remove-btn:hover {
    background: rgba(244, 67, 54, 0.1);
    border-color: #F44336;
    color: #F44336;
}

.trade-remove-btn svg {
    width: 18px;
    height: 18px;
}

/* Trade Rating */
.trade-rating {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
}

.rating-stars {
    display: flex;
    gap: 2px;
}

.star-icon {
    width: 16px;
    height: 16px;
    color: #FFA726;
}

.rating-value {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

.rating-count {
    font-size: 13px;
    color: var(--text-tertiary);
}

/* Trust Badges */
.trade-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 12px;
}

.trust-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    background: var(--surface-secondary);
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: help;
    position: relative;
}

.trust-badge.verified {
    background: rgba(76, 175, 80, 0.15);
    color: #4CAF50;
}

.trust-badge.top-rated {
    background: rgba(255, 193, 7, 0.15);
    color: #FFC107;
}

.trust-badge svg {
    width: 14px;
    height: 14px;
}

/* Tooltip on hover */
.trust-badge::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    padding: 6px 10px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 11px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
    margin-bottom: 4px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 10;
}

.trust-badge:hover::after {
    opacity: 1;
}

/* Trade Tagline */
.trade-tagline {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.5;
    margin-bottom: 16px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Trade Stats */
.trade-stats {
    display: flex;
    gap: 16px;
    padding: 12px 0;
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 16px;
}

.trade-stat {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.stat-value {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
}

.stat-label {
    font-size: 12px;
    color: var(--text-tertiary);
}

/* Card Actions */
.trade-card-actions {
    display: flex;
    gap: 8px;
}

.trade-card-actions .btn {
    flex: 1;
}

.trade-card-actions .btn-primary {
    background: linear-gradient(135deg, #42A5F5, #7C4DFF);
    border: none;
}

.trade-card-actions .btn-primary:hover {
    background: linear-gradient(135deg, #1E88E5, #6A1B9A);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(66, 165, 245, 0.3);
}

/* Empty State */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 80px 32px;
    text-align: center;
}

.empty-state-illustration {
    margin-bottom: 24px;
    opacity: 0.8;
}

.empty-state-title {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 12px 0;
}

.empty-state-text {
    font-size: 16px;
    color: var(--text-secondary);
    margin: 0 0 32px 0;
    max-width: 400px;
    line-height: 1.6;
}

/* Responsive */
@media (max-width: 1200px) {
    .saved-trades-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .page-header-actions {
        flex-direction: column;
        align-items: stretch;
        width: 100%;
    }
    
    .filter-select {
        width: 100%;
    }
    
    .saved-trades-grid {
        grid-template-columns: 1fr;
    }
    
    .trade-card-actions {
        flex-direction: column;
    }
}

/* Animation */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.trade-card {
    animation: fadeInUp 0.4s ease-out;
}

.trade-card:nth-child(1) { animation-delay: 0s; }
.trade-card:nth-child(2) { animation-delay: 0.1s; }
.trade-card:nth-child(3) { animation-delay: 0.2s; }
.trade-card:nth-child(4) { animation-delay: 0.3s; }
.trade-card:nth-child(5) { animation-delay: 0.4s; }
.trade-card:nth-child(6) { animation-delay: 0.5s; }
</style>
</head>
<body>
    <div class="ambient-bg"></div>


    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="index.html" class="logo">
                <div class="logo-icon">T</div>
                <span class="logo-text">TradeMatch</span>
            </a>
        </div>

        <nav class="sidebar-nav">
            <div class="nav-section">
                <div class="nav-section-title">Main</div>
                <a href="index.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="my-jobs.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                    <span class="nav-text">My Jobs</span>
                </a>
                <a href="quotes.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    <span class="nav-text">Quotes</span>
                </a>
                <a href="messages.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                    </svg>
                    <span class="nav-text">Messages</span>
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Trades</div>
                <a href="saved-trades.html" class="nav-item active">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                    </svg>
                    <span class="nav-text">Saved Trades</span>
                </a>
                <a href="reviews.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                    </svg>
                    <span class="nav-text">Reviews</span>
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Account</div>
                <a href="notifications.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                    </svg>
                    <span class="nav-text">Notifications</span>
                </a>
                <a href="settings.html" class="nav-item">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    <span class="nav-text">Settings</span>
                </a>
            </div>
        </nav>

        <div class="sidebar-footer">
            <button class="collapse-btn" id="collapseBtn">
                <svg class="collapse-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"/>
                </svg>
            </button>
        </div>
    </aside>

    <!-- Top Navigation -->
    <!-- Top Navigation with Modals -->
<header class="top-nav" id="topNav">
    <div class="top-nav-left">
        <div class="search-container">
            <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
            <input type="text" class="search-input" placeholder="Search jobs, quotes, messages...">
        </div>
    </div>

    <div class="top-nav-right">
        <div class="theme-toggle" id="themeToggle">
            <div class="theme-toggle-slider">
                <svg class="theme-toggle-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
                </svg>
            </div>
        </div>

        <!-- Notification Button with Modal -->
        <div class="notification-modal-container">
            <button class="icon-button" id="notificationBtn">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                </svg>
                <span class="notification-badge"></span>
            </button>

            <!-- Notification Modal -->
            <div class="top-bar-modal notification-modal" id="notificationModal">
                <div class="notification-modal-header">
                    <h3 class="notification-modal-title">Notifications</h3>
                    <button class="mark-all-read" id="markAllRead">Mark all read</button>
                </div>
                <div class="notification-modal-body">
                    <div class="notification-item unread" data-link="quotes.html">
                        <div class="notification-icon quote">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                        </div>
                        <div class="notification-content">
                            <div class="notification-text">New quote received from Elite Builders for Kitchen Renovation</div>
                            <div class="notification-time">2 hours ago</div>
                        </div>
                    </div>

                    <div class="notification-item unread" data-link="messages.html">
                        <div class="notification-icon message">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                            </svg>
                        </div>
                        <div class="notification-content">
                            <div class="notification-text">Green Gardens Ltd sent you a message about Garden Landscaping</div>
                            <div class="notification-time">5 hours ago</div>
                        </div>
                    </div>

                    <div class="notification-item" data-link="reviews.html">
                        <div class="notification-icon review">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                            </svg>
                        </div>
                        <div class="notification-content">
                            <div class="notification-text">Please leave a review for PowerPro Electricians</div>
                            <div class="notification-time">1 day ago</div>
                        </div>
                    </div>

                    <div class="notification-item" data-link="quotes.html">
                        <div class="notification-icon quote">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                        </div>
                        <div class="notification-content">
                            <div class="notification-text">New quote received from Quick Fix Plumbing for Bathroom Plumbing</div>
                            <div class="notification-time">2 days ago</div>
                        </div>
                    </div>
                </div>
                <div class="notification-modal-footer">
                    <a href="notifications.html" class="view-all-link">View all notifications</a>
                </div>
            </div>
        </div>

        <!-- Profile Menu with Modal -->
        <div class="profile-modal-container">
            <div class="user-menu" id="profileMenuBtn">
                <div class="user-avatar">JD</div>
                <div class="user-info">
                    <div class="user-name">John Doe</div>
                    <div class="user-role">Customer</div>
                </div>
            </div>

            <!-- Profile Modal -->
            <div class="top-bar-modal profile-modal" id="profileModal">
                <div class="profile-modal-header">
                    <div class="profile-modal-avatar">JD</div>
                    <div class="profile-modal-info">
                        <div class="profile-modal-name">John Doe</div>
                        <div class="profile-modal-role">Customer</div>
                    </div>
                </div>
                <div class="profile-modal-menu">
                    <a href="profile.html" class="profile-menu-item">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        My Profile
                    </a>
                    <a href="settings.html" class="profile-menu-item">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        Account Settings
                    </a>
                    <div class="profile-menu-divider"></div>
                    <a href="#" class="profile-menu-item logout" id="logoutBtn">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                        </svg>
                        Logout
                    </a>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Modal Backdrop -->
<div class="modal-backdrop" id="modalBackdrop"></div>


    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <div class="content-wrapper">
            <!-- Page Header -->
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Saved Trades</h1>
                    <p class="page-subtitle">Tradespeople you've saved for future jobs</p>
                </div>
                <div class="page-header-actions">
                    <select class="filter-select" id="tradeFilter">
                        <option value="all">All Trades</option>
                        <option value="Plumber">Plumbers</option>
                        <option value="Electrician">Electricians</option>
                        <option value="Carpenter">Carpenters</option>
                        <option value="Painter">Painters</option>
                        <option value="Architect">Architects</option>
                    </select>
                    <select class="filter-select" id="sortSelect">
                        <option value="recent">Recently saved</option>
                        <option value="rating">Highest rated</option>
                        <option value="jobs">Most jobs completed</option>
                    </select>
                </div>
            </div>

            <!-- Saved Trades Grid -->
            <div class="saved-trades-grid" id="savedTradesGrid">
                <!-- Trade cards will be rendered here by JavaScript -->
            </div>

            <!-- Empty State (hidden by default) -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-state-illustration">
                    <svg width="120" height="120" viewBox="0 0 120 120" fill="none">
                        <circle cx="60" cy="60" r="50" fill="var(--surface-secondary)"/>
                        <path d="M40 52C40 46.4772 44.4772 42 50 42H70C75.5228 42 80 46.4772 80 52V78H40V52Z" fill="var(--surface-tertiary)"/>
                        <circle cx="55" cy="58" r="4" fill="var(--text-tertiary)"/>
                        <circle cx="65" cy="58" r="4" fill="var(--text-tertiary)"/>
                        <path d="M52 68C52 68 56 72 60 72C64 72 68 68 68 68" stroke="var(--text-tertiary)" stroke-width="2" stroke-linecap="round"/>
                        <path d="M45 32L60 22L75 32" stroke="var(--accent-primary)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h3 class="empty-state-title">No saved trades yet</h3>
                <p class="empty-state-text">Save trades to compare them later or contact them again quickly.</p>
                <button class="btn btn-primary" onclick="window.location.href='index.html'">
                    <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    Browse Trades
                </button>
            </div>
        </div>
    </main>

    <script src="../dashboardApp.js"></script>
    <script>
        /**
         * Saved Trades Page JavaScript
         * Handles filtering, sorting, and removing saved trades
         */

        // Demo saved trades data
        const DEMO_SAVED_TRADES = [
            {
                id: 'trade-1',
                vendorId: 'vendor-1',
                name: "Mike's Plumbing Services",
                category: 'Plumber',
                location: 'Battersea, SW11',
                rating: 4.9,
                reviewCount: 127,
                jobsCompleted: 450,
                verified: true,
                topRated: true,
                tagline: 'Emergency plumbing and heating specialists. Available 24/7 for urgent repairs.',
                avatar: 'MP',
                savedDate: new Date('2024-02-01')
            },
            {
                id: 'trade-2',
                vendorId: 'vendor-2',
                name: 'Spark Electric Ltd',
                category: 'Electrician',
                location: 'Islington, N1',
                rating: 4.8,
                reviewCount: 203,
                jobsCompleted: 680,
                verified: true,
                topRated: true,
                tagline: 'Fully qualified electricians for residential and commercial projects.',
                avatar: 'SE',
                savedDate: new Date('2024-01-28')
            },
            {
                id: 'trade-3',
                vendorId: 'vendor-3',
                name: "Davies Carpentry",
                category: 'Carpenter',
                location: 'Clapham, SW4',
                rating: 5.0,
                reviewCount: 89,
                jobsCompleted: 320,
                verified: true,
                topRated: true,
                tagline: 'Bespoke carpentry and joinery. From kitchens to custom furniture.',
                avatar: 'DC',
                savedDate: new Date('2024-01-25')
            },
            {
                id: 'trade-4',
                vendorId: 'vendor-4',
                name: 'Colour Perfect Decorators',
                category: 'Painter',
                location: 'Wandsworth, SW18',
                rating: 4.7,
                reviewCount: 156,
                jobsCompleted: 540,
                verified: true,
                topRated: false,
                tagline: 'Professional painting and decorating for homes and businesses.',
                avatar: 'CP',
                savedDate: new Date('2024-01-20')
            },
            {
                id: 'trade-5',
                vendorId: 'vendor-5',
                name: 'Modern Living Architecture',
                category: 'Architect',
                location: 'Chelsea, SW3',
                rating: 4.9,
                reviewCount: 64,
                jobsCompleted: 180,
                verified: true,
                topRated: true,
                tagline: 'Award-winning architectural design for extensions and new builds.',
                avatar: 'ML',
                savedDate: new Date('2024-01-15')
            },
            {
                id: 'trade-6',
                vendorId: 'vendor-6',
                name: 'QuickFix Electrical',
                category: 'Electrician',
                location: 'Hammersmith, W6',
                rating: 4.6,
                reviewCount: 92,
                jobsCompleted: 380,
                verified: true,
                topRated: false,
                tagline: 'Fast, reliable electrical services. Same-day appointments available.',
                avatar: 'QF',
                savedDate: new Date('2024-01-10')
            }
        ];

        // State management
        let savedTrades = [];
        let currentFilter = 'all';
        let currentSort = 'recent';

        // DOM elements
        const savedTradesGrid = document.getElementById('savedTradesGrid');
        const emptyState = document.getElementById('emptyState');
        const tradeFilter = document.getElementById('tradeFilter');
        const sortSelect = document.getElementById('sortSelect');

        function notifyToast(message, type = 'success') {
            if (typeof showToast === 'function') {
                showToast(message, type);
                return;
            }
            alert(message);
        }

        function formatSavedDate(value) {
            if (value instanceof Date) return value;
            const parsed = new Date(value);
            return Number.isNaN(parsed.getTime()) ? new Date() : parsed;
        }

        function normalizeSavedTrade(item) {
            return {
                id: item.id,
                vendorId: item.vendorId || item.vendor_id || item.vendor?.id || item.vendor || item.vendorID,
                name: item.name || item.vendor_name || item.company_name || 'Vendor',
                category: item.category || item.service_type || item.trade || 'Trade',
                location: item.location || item.postcode || 'Location not set',
                rating: Number(item.rating || 0),
                reviewCount: Number(item.reviewCount || item.reviews_count || item.review_count || 0),
                jobsCompleted: Number(item.jobsCompleted || item.jobs_completed || 0),
                verified: Boolean(item.verified || item.is_verified),
                topRated: Boolean(item.topRated || item.top_rated),
                tagline: item.tagline || item.tag_line || item.description || 'Trusted TradeMatch professional.',
                avatar: item.avatar || item.avatarUrl || item.avatar_url || (typeof getInitials === 'function' ? getInitials(item.name || item.vendor_name || '') : 'TM'),
                savedDate: formatSavedDate(item.savedDate || item.saved_at || item.savedAt)
            };
        }

        /**
         * Generate star rating HTML
         */
        function generateStarRating(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 !== 0;
            let starsHTML = '';

            for (let i = 0; i < fullStars; i++) {
                starsHTML += `
                    <svg class="star-icon" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                `;
            }

            if (hasHalfStar) {
                starsHTML += `
                    <svg class="star-icon" fill="currentColor" viewBox="0 0 24 24">
                        <defs>
                            <linearGradient id="half">
                                <stop offset="50%" stop-color="currentColor"/>
                                <stop offset="50%" stop-color="transparent"/>
                            </linearGradient>
                        </defs>
                        <path fill="url(#half)" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                `;
            }

            const emptyStars = 5 - Math.ceil(rating);
            for (let i = 0; i < emptyStars; i++) {
                starsHTML += `
                    <svg class="star-icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                `;
            }

            return starsHTML;
        }

        /**
         * Render a single trade card
         */
        function renderTradeCard(trade) {
            const ratingValue = Number.isFinite(trade.rating) ? trade.rating : 0;
            const reviewCount = Number.isFinite(trade.reviewCount) ? trade.reviewCount : 0;
            const jobsCompleted = Number.isFinite(trade.jobsCompleted) ? trade.jobsCompleted : 0;
            return `
                <div class="trade-card" data-id="${trade.id}">
                    <button class="trade-remove-btn" onclick="removeTrade('${trade.id}')" title="Remove from saved">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>

                    <div class="trade-card-header">
                        <div class="trade-avatar">${trade.avatar}</div>
                        <div class="trade-info">
                            <h3 class="trade-name">${trade.name}</h3>
                            <span class="trade-category-badge">${trade.category}</span>
                            <div class="trade-location">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                                ${trade.location}
                            </div>
                        </div>
                    </div>

                    <div class="trade-rating">
                        <div class="rating-stars">
                            ${generateStarRating(ratingValue)}
                        </div>
                        <span class="rating-value">${ratingValue.toFixed(1)}</span>
                        <span class="rating-count">(${reviewCount} reviews)</span>
                    </div>

                    <div class="trade-badges">
                        ${trade.verified ? `
                            <div class="trust-badge verified" data-tooltip="Verified business with approved documents">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                                </svg>
                                Verified
                            </div>
                        ` : ''}
                        ${trade.topRated ? `
                            <div class="trust-badge top-rated" data-tooltip="Based on reviews from TradeMatch customers">
                                <svg fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                                Top Rated
                            </div>
                        ` : ''}
                    </div>

                    <p class="trade-tagline">${trade.tagline}</p>

                    <div class="trade-stats">
                        <div class="trade-stat">
                            <span class="stat-value">${jobsCompleted}</span>
                            <span class="stat-label">Jobs completed</span>
                        </div>
                        <div class="trade-stat">
                            <span class="stat-value">${reviewCount}</span>
                            <span class="stat-label">Reviews</span>
                        </div>
                    </div>

                    <div class="trade-card-actions">
                        <button class="btn btn-primary" onclick="requestQuote('${trade.id}')">
                            <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            Request Quote
                        </button>
                        <button class="btn btn-secondary" onclick="sendMessage('${trade.id}')">
                            <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                            </svg>
                            Message
                        </button>
                    </div>
                </div>
            `;
        }

        /**
         * Filter trades based on category
         */
        function filterTrades() {
            let filtered = savedTrades;

            if (currentFilter !== 'all') {
                filtered = savedTrades.filter(trade => trade.category === currentFilter);
            }

            return filtered;
        }

        /**
         * Sort trades based on selected sort option
         */
        function sortTrades(trades) {
            let sorted = [...trades];

            switch(currentSort) {
                case 'recent':
                    sorted.sort((a, b) => b.savedDate - a.savedDate);
                    break;
                case 'rating':
                    sorted.sort((a, b) => b.rating - a.rating);
                    break;
                case 'jobs':
                    sorted.sort((a, b) => b.jobsCompleted - a.jobsCompleted);
                    break;
            }

            return sorted;
        }

        /**
         * Render all trades
         */
        function renderTrades() {
            let filtered = filterTrades();
            let sorted = sortTrades(filtered);

            if (sorted.length === 0) {
                // Show empty state
                savedTradesGrid.style.display = 'none';
                emptyState.style.display = 'flex';
            } else {
                // Show trades
                savedTradesGrid.style.display = 'grid';
                emptyState.style.display = 'none';
                savedTradesGrid.innerHTML = sorted.map(trade => renderTradeCard(trade)).join('');
            }
        }

        /**
         * Remove a trade from saved list
         */
        function removeTrade(id) {
            const trade = savedTrades.find(t => t.id === id);
            if (trade) {
                if (confirm(`Remove ${trade.name} from your saved trades?`)) {
                    const token = getAuthToken();
                    if (!token || isDemoToken(token)) {
                        savedTrades = savedTrades.filter(t => t.id !== id);
                        renderTrades();
                        notifyToast(`${trade.name} removed from saved trades`);
                        return;
                    }

                    apiFetchJson(`/api/saved-trades/${encodeURIComponent(id)}`, {
                        method: 'DELETE'
                    })
                        .then(() => {
                            savedTrades = savedTrades.filter(t => t.id !== id);
                            renderTrades();
                            notifyToast(`${trade.name} removed from saved trades`);
                        })
                        .catch((error) => {
                            notifyToast(error?.message || 'Failed to remove trade', 'error');
                        });
                }
            }
        }

        /**
         * Request quote from a trade
         */
        function requestQuote(id) {
            const trade = savedTrades.find(t => t.id === id);
            if (!trade) return;
            const vendorId = trade.vendorId || trade.id;
            window.location.href = `post-job.html?vendor=${encodeURIComponent(vendorId)}`;
        }

        /**
         * Send message to a trade
         */
        function sendMessage(id) {
            const trade = savedTrades.find(t => t.id === id);
            if (!trade) return;
            const vendorId = trade.vendorId || trade.id;
            window.location.href = `messages.html?vendor=${encodeURIComponent(vendorId)}`;
        }

        async function loadSavedTrades() {
            const token = getAuthToken();
            if (!token || isDemoToken(token)) {
                return DEMO_SAVED_TRADES.map(normalizeSavedTrade);
            }

            try {
                const data = await apiFetchJson('/api/saved-trades');
                const list = Array.isArray(data?.savedTrades) ? data.savedTrades : [];
                return list.map(normalizeSavedTrade);
            } catch (error) {
                notifyToast('Failed to load saved trades', 'error');
                return [];
            }
        }

        /**
         * Handle filter change
         */
        tradeFilter.addEventListener('change', (e) => {
            currentFilter = e.target.value;
            renderTrades();
            console.log(`Filter changed to: ${currentFilter}`);
        });

        /**
         * Handle sort change
         */
        sortSelect.addEventListener('change', (e) => {
            currentSort = e.target.value;
            renderTrades();
            console.log(`Sort changed to: ${currentSort}`);
        });

        /**
         * Initialize the page
         */
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Saved Trades page initialized');
            loadSavedTrades().then((list) => {
                savedTrades = list;
                renderTrades();
            });
        });

        // Add toast animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateX(100%);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }
            @keyframes slideOut {
                from {
                    opacity: 1;
                    transform: translateX(0);
                }
                to {
                    opacity: 0;
                    transform: translateX(100%);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
